{% extends "base.html" %}

{% block title %}Edit Student{% endblock %}

{% block content %}
<h2 class="mb-4">✏️ Edit Student</h2>

<form method="POST">
    {{ form.hidden_tag() }}

    <div class="row g-3">
        <div class="col-md-6">
            <label class="form-label">Student Name</label>
            {{ form.student_name(class="form-control", required=True) }}
        </div>

        <div class="col-md-6">
            <label class="form-label">Father Name</label>
            {{ form.father_name(class="form-control") }}
        </div>

        <div class="col-md-6">
            <label class="form-label">Mother Name</label>
            {{ form.mother_name(class="form-control") }}
        </div>

        <div class="col-md-6">
            <label class="form-label">Mobile Number</label>
            {{ form.mobile_number(class="form-control") }}
        </div>

        <div class="col-md-4">
            <label class="form-label">Class</label>
            {{ form.student_class(class="form-select") }}
        </div>

        <div class="col-md-4">
            <label class="form-label">Village</label>
            {{ form.village(class="form-control") }}
        </div>

        <div class="col-md-4">
            <label class="form-label">Previous School</label>
            {{ form.previous_school(class="form-control") }}
        </div>

        <div class="col-12">
            <label class="form-label">Remarks</label>
            {{ form.remarks(class="form-control") }}
        </div>

        <div class="col-md-6 mt-3">
            <label class="form-label">Assign Teacher</label>
            {{ form.teacher_id(class="form-select") }}
        </div>

        <div class="col-md-6 mt-3">
            <div class="form-check">
                {{ form.is_admitted(class="form-check-input", id="is_admitted") }}
                <label class="form-check-label" for="is_admitted">Mark as Admitted</label>
            </div>

            <div class="mt-2" id="admission_date_div" {% if not form.is_admitted.data %}style="display:none;"{% endif %}>
                <label class="form-label">Admission Date</label>
                {{ form.admission_date(class="form-control") }}
            </div>
        </div>
    </div>

    <div class="mt-4 d-grid d-md-flex gap-2">
        <button type="submit" class="btn btn-primary">Update</button>
        <a href="{{ url_for('main.admin_dashboard') }}" class="btn btn-secondary">Back</a>
    </div>
</form>

<script>
document.getElementById('is_admitted')?.addEventListener('change', function() {
    const dateDiv = document.getElementById('admission_date_div');
    if (this.checked) {
        dateDiv.style.display = 'block';
    } else {
        dateDiv.style.display = 'none';
    }
});
</script>
{% endblock %}
